# Cleanup-Analyse BSky-Kampagnen-Bot – 2025-12-02

Diese Datei dokumentiert potenzielle Aufräumkandidaten (Code-Reste, ungenutzte Utilities) im Monorepo, basierend auf einer statischen Analyse. Es wurden **keine** Dateien gelöscht, nur klassifiziert.

## Kategorien

- ✅ **Sicher löschbar** – wird nirgends importiert oder nur in klaren Test-/Experiment-Dateien verwendet.
- ⚠️ **Wahrscheinlich veraltet** – wird verwendet, ist aber erkennbar Debug-/Behelfscode oder aktuell ungenutztes Utility.
- ❗ **Kritisch / behalten** – gehört eindeutig zum aktiven Ausführungspfad (Entry → Layout → Views → Services).

## Dashboard (`dashboard/`)

### ⚠️ Wahrscheinlich veraltet

- `dashboard/src/hooks/useThemeDebug.js`  
  **Typ:** Hook (Debug)  
  **Kategorie:** ⚠️ wahrscheinlich veraltet  
  **Begründung:**  
  - Einziger Consumer: `dashboard/src/components/layout/AppLayout.jsx` ruft `useThemeDebug('AppLayout', …)` auf.  
  - Hook macht nur `console.log('[theme-debug]', …)` und greift lesend auf das Theme zu.  
  - Entfernen würde nur Debug-Logging betreffen, nicht die UI-Funktionalität.  
  - Empfehlung: Vor endgültiger Löschung prüfen, ob das Logging noch aktiv genutzt wird; ansonsten Entfernen oder hinter Feature-Flag legen.

### ❗ Kritisch / behalten (Auszug)

Diese Dateien sind klar Teil des produktiven Pfads (von `main.jsx` aus erreichbar) und sollten **nicht** im Rahmen eines einfachen Cleanups gelöscht werden:

- `dashboard/src/main.jsx` – Einstiegspunkt der Dashboard-React-App.  
- `dashboard/src/App.jsx` – zentrale App-Logik (Navigation, Theme-Toggle, Bsky-Client-Einbettung).  
- `dashboard/src/components/layout/AppLayout.jsx` – Hauptlayout mit Navigation, Header, Scroll-Container.  
- `dashboard/src/components/views/*.jsx` – Views für Übersicht, Skeets, Threads, Login, About, Config.  
- Diverse Hooks (`dashboard/src/hooks/useSkeets.js`, `useThreads.js`, `useSession.js`, `useViewState.js`, `useImportExport.js`, `useSse.js`, `useSkeetActions.js`, `useThreadActions.js`, …) – in App/Layout/Views aktiv genutzt.

## BSky-Client (`bsky-client/`)

### ⚠️ Wahrscheinlich veraltet / Stil-Aufräumung

- `bsky-client/src/hooks/useThemeMode.js`  
  **Typ:** Hook-Re-Export  
  **Kategorie:** ⚠️ wahrscheinlich veraltet / Stil-Thema  
  **Begründung:**  
  - Inhalt: `export { useThemeMode } from '@bsky-kampagnen-bot/shared-ui'`.  
  - Wird an mehreren Stellen als Convenience-Import genutzt (`../../hooks/useThemeMode`).  
  - Gleichzeitig importiert `bsky-client/src/modules/layout/BskyClientLayout.jsx` `useThemeMode` bereits direkt aus `@bsky-kampagnen-bot/shared-ui`.  
  - Kein funktionaler Schaden, aber doppelte Importwege erhöhen Komplexität.  
  - Empfehlung: Entweder konsequent den Re-Export nutzen oder überall direkt aus `@bsky-kampagnen-bot/shared-ui` importieren; danach kann die Datei ggf. entfallen.

### ❗ Kritisch / behalten (Auszug)

Alle folgenden Dateien hängen klar im aktiven Pfad (`main.jsx` / `index.jsx` → `ClientApp` → Modules/Hooks/Context) und sollten nicht gelöscht werden:

- `bsky-client/src/main.jsx`, `bsky-client/src/index.jsx` – Einstiegspunkte (eigenständig + eingebettet).  
- `bsky-client/src/ClientApp.jsx` – Haupt-App-Komponente.  
- `bsky-client/src/context/*.jsx` – App-, Layout- und CardConfig-Context + Reducer.  
- `bsky-client/src/i18n/I18nProvider.jsx`, `bsky-client/src/i18n/messages.js` – i18n-Infrastruktur.  
- `bsky-client/src/modules/**/*` – Layout, Timeline, Search, Profile, Notifications, Settings, Bookmarks, Composer; alle über `ClientApp` oder `modules/*/index.js` eingebunden.  
- `bsky-client/src/hooks/useComposer.js`, `useThread.js`, `useFeedPicker.js`, `useMediaLightbox.js`, `useNotificationPolling.js`, `useListPolling.js`, `useClientConfig.js` – an mehreren Stellen in den Modulen genutzt.

## Shared-UI (`packages/shared-ui/`)

### ⚠️ Wahrscheinlich veraltet / ungenutztes Utility

- `packages/shared-ui/src/utils/compressImage.js`  
  **Typ:** Utility-Funktion  
  **Kategorie:** ⚠️ wahrscheinlich veraltet / ungenutzt  
  **Begründung:**  
  - Wird in keiner der untersuchten Apps (`dashboard`, `bsky-client`) und auch nicht im Shared-UI selbst importiert.  
  - Vermutlich als vorbereitete Helper-Funktion gedacht, aber bisher nicht produktiv angebunden.  
  - Empfehlung:  
    - Wenn kein kurzfristiger Einsatz geplant ist, entweder in einen `legacy/`-/`_archive/`-Ordner verschieben oder nach kurzer Beobachtungsphase löschen.  
    - Falls künftig Image-Kompression in der UI benötigt wird, kann die Datei bewusst reaktiviert oder überarbeitet werden.

### ❗ Kritisch / behalten (Auszug)

- `packages/shared-ui/src/index.js` – zentrale Exportdatei, von Dashboard und Bsky-Client importiert.  
- Komponenten: `Button.jsx`, `Card.jsx`, `Modal.jsx`, `MediaDialog.jsx`, `ScrollTopButton.jsx`, `ThemeToggle.jsx`, `NewPostsBanner.jsx`, `InlineMenu.jsx`, `ToastProvider.jsx`, `toast-context.js`, `card.css` – werden in Dashboard/Bsky-Client aktiv genutzt.  
- Hooks: `useToast.js`, `useThemeMode.js`, `useThemeDebug.js` – `useToast` und `useThemeMode` sind produktiv im Einsatz; `useThemeDebug` ggf. indirekt über Dashboard-`AppLayout`.  
- Theme: `theme/config.js`, `theme/ThemeProvider.jsx` – zentrale Theme-Konfiguration und globaler Theme-Provider für beide Frontends.  
- Tests (`*.test.jsx`) – Teil der Test-Suite, nicht löschen.

## Backend (`backend/`)

Für das Backend wurde nur eine grobe Analyse vorgenommen:

- Routen (`backend/src/api/routes/*.js`) und zugehörige Controller/Services/Modelle sind über `backend/src/api/routes/index.js` und `backend/server.js` in den aktiven Pfad eingebunden.  
- Es gibt keine offensichtlich unreferenzierten Controller oder Routen-Dateien.  
- Diverse Utilities (`backend/src/utils/*.js`) werden direkt aus `server.js` oder Services verwendet.

**Einstufung Backend (aktuell):**

- ❗ **Kritisch / behalten** – alle Routen/Controller/Services/Models/Utils, da keine klar ungenutzte Datei gefunden wurde.  
- ✅ / ⚠️ – keine eindeutigen Löschkandidaten identifiziert, daher hier derzeit **keine** Aufräum-Empfehlung.

## Nächste Schritte (empfohlen)

1. **Batch 1 – sehr konservativ:**  
   - Optional: `dashboard/src/hooks/useThemeDebug.js` und `packages/shared-ui/src/utils/compressImage.js` in einen `legacy/`-/`_archive/`-Ordner verschieben, statt sofort zu löschen.  
   - Danach: `npm test`, `npm run lint`, ggf. `npm run build:frontend` laufen lassen.

2. **Batch 2 – Stil-Aufräumung:**  
   - `bsky-client/src/hooks/useThemeMode.js` konsolidieren (entweder überall verwenden oder direkt aus Shared-UI importieren, aber nur einen Weg beibehalten).

3. **Dokumentation ergänzen:**  
   - Wenn Dateien tatsächlich gelöscht oder verschoben werden, diese Markdown-Datei mit Datum/Commit-Referenzen aktualisieren.

